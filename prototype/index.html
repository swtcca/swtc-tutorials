<!DOCTYPE html>
<html>
<head>
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@3.x/css/materialdesignicons.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/prismjs/themes/prism.css" />
  <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
  <meta charset="UTF-8">
</head>
<body>
  <div id="app">
    <v-app>
    <v-app-bar app dark>
      <v-toolbar-title>{{ settings.toolbarTitle }}</v-toolbar-title>
      <v-spacer></v-spacer>
      <div class="text-center">
          <v-menu offset-y>
            <template v-slot:activator="{ on }">
              <v-btn color="primary" dark v-on="on"> {{ activeLabel.name }} </v-btn>
            </template>
            <v-list>
              <v-list-item v-for="(label, index) in labels" :key="index" @click="activeLabel=label; funcUpdateAccountInfo()">
                <v-list-item-title>{{ label.name }}</v-list-item-title>
              </v-list-item>
            </v-list>
          </v-menu>
      </div>
      <v-spacer></v-spacer>
      <v-btn color="white" @click="funcUpdateAccountInfo" text rounded class="my-2">{{ wallets.name }}</v-btn>
      <v-btn color="white" @click="browsers.dialog=!browsers.dialog" text rounded class="my-2">{{ browsers.name }}</v-btn>
      <v-btn color="white" @click="settings.dialog=!settings.dialog" text rounded class="my-2">设置</v-btn>
    </v-app-bar>

    <v-content>
      <v-container fluid>
        <v-row>
          <v-dialog v-model="wallets.dialog" persistent full-page>
            <v-card min-height="500" min-width="400">
              <v-card-title class="headline">账户<v-spacer></v-spacer>
                <v-btn color="red lighten-1" text @click="funcUpdateAccountInfo"><v-icon fab large>mdi-reload</v-icon></v-btn>
                <v-btn color="red lighten-1" text @click="wallets.dialog = false"><v-icon fab large>mdi-close-circle-outline</v-icon></v-btn>
              </v-card-title>
              <v-toolbar dense dark><v-app-bar-nav-icon></v-app-bar-nav-icon></v-toolbar>
              <v-container>
                <v-row>
                  <v-tabs v-model="accountTabs">
                    <v-tabs-slider></v-tabs-slider>
                    <v-tab v-for="(v, name) in accountInfo" :key="name" :href="`#${name}`">{{ name }}</v-tab>
                  </v-tabs>
                </v-row>
                <v-row>
                  <v-tabs-items v-model="accountTabs">
                      <v-tab-item v-for="(v, name) in accountInfo" :key="name" :value="name">
                          <prism-component language="javascript">
{{v}}</prism-component>
                      </v-tab-item>
                  </v-tabs-items>
                </v-row>
              </v-container>
            </v-card>
          </v-dialog>
          <modal-browser :browser-blocks="blocks" :browser-link="browsers"></modal-browser>
          <v-dialog v-model="settings.dialog" persistent full-page>
            <v-card min-height="500" min-width="400">
              <v-card-title class="headline">设置<v-spacer></v-spacer><v-btn color="red darken-1" text @click="settings.dialog = false"><v-icon fab large>mdi-close-circle-outline</v-icon></v-btn></v-card-title>
              <v-toolbar dense dark><v-app-bar-nav-icon></v-app-bar-nav-icon></v-toolbar>
              <v-container>
                <v-row>
                  <v-col cols="6" md="4">账户地址</v-col>
                  <v-col cols="6" md="8">{{ settings.walletAddress }}</v-col>
                  <v-col cols="6" md="4">账户密钥</v-col>
                  <v-col cols="6" md="8" class="pb-4"><v-text-field label="secret" :type="settings.walletSecretEye ? 'text' : 'password'" :append-icon="settings.walletSecretEye? 'mdi-eye' : 'mdi-eye-off'" @click:append="settings.walletSecretEye=!settings.walletSecretEye" v-model="settings.walletSecret"></v-text-field></v-col>
                </v-row>
                <v-row>
                  <v-col cols="6" md="4">测试链</v-col>
                  <v-col cols="6" md="8"  class="pb-4"><v-switch v-model="settings.testChain" readonly></v-switch></v-col>
                </v-row>
                <v-row>
                  <v-col cols="6" md="4">更新间隔</v-col>
                  <v-col cols="6" md="8" class="pr-4">
                    <v-slider v-model="settings.updateInterval" class="align-center" max="20" min="5" hide-details>
                      <template v-slot:append>
                        <v-text-field v-model="settings.updateInterval" class="mt-0 pt-0" hide-details single-line type="number" style="width: 60px"></v-text-field>
                      </template>
                    </v-slider>
                  </v-col>
                </v-row>
                <v-row>
                  <v-col cols="6" md="4">最多区块</v-col>
                  <v-col cols="6" md="8" class="pr-4">
                    <v-slider v-model="settings.maxBlocks" class="align-center" max="100" min="5" hide-details>
                      <template v-slot:append>
                        <v-text-field v-model="settings.maxBlocks" class="mt-0 pt-0" hide-details single-line type="number" style="width: 60px"></v-text-field>
                      </template>
                    </v-slider>
                  </v-col>
                </v-row>
                <v-row>
                  <v-col cols="12" md="6" class="font-weight-medium">
                    <v-textarea outlined auto-grow row-height="32" name="evalString" label="修改代码" v-model="evalString" class="mt-2"></v-textarea>
                  </v-col>
                  <v-col cols="12" md="6">
                    <prism-component language="javascript" :code="evalString"></prism-component>
                  </v-col>
                </v-row>
               </v-container>
               <v-card-actions>
                 <v-spacer></v-spacer>
                 <v-btn color="green darken-1" text @click="funcEval(evalString)">运行代码</v-btn>
               </v-card-actions>
            </v-card>
          </v-dialog>

          <v-dialog v-for="(card,key) in cards" :key="key" v-model="card.raised" persistent full-page>
            <v-card min-height="500" min-width="400">
              <v-card-title class="headline">remote.{{ key }}({{ funcCardParam(card) }})<v-spacer></v-spacer>
                <v-btn color="red lighten-1" text @click="card.raised = false"><v-icon fab large>mdi-close-circle-outline</v-icon></v-btn>
              </v-card-title>
              <v-toolbar dense dark><v-app-bar-nav-icon></v-app-bar-nav-icon></v-toolbar>
              <v-container>
                <v-row>
                  <v-tabs v-model="card.tab">
                    <v-tabs-slider></v-tabs-slider>
                    <v-tab v-for="name in card.tabs" :key="name" :href="`#${name}`">{{ name }}</v-tab>
                  </v-tabs>
                </v-row>
                <v-row>
                  <v-col cols="12">
                    <v-card outlined tile :raised="card.raised">
                      <v-card-title>
                        <h2>remote.{{ key }}({{ funcCardParam(card) }})</h2>
                      </v-card-title>
                      <v-divider></v-divider>
                      <v-row>
                        <v-col cols="12" class="text-center" v-show="card.tab === '参数'">
                          <prism-component inline language="javascript">let remote = new Remote()</prism-component>
                        </v-col>
                        <v-col cols="12" md="6">
                          <form>
                            <v-textarea outlined auto-grow class="mt-4 pt-4" :name="key" label="修改代码" v-model="card.code" class="mt-2"></v-textarea>
                          </form> 
                        </v-col>
                        <v-col cols="12" md="6">
                          <prism-component language="javascript" :code="card.code"></prism-component>
                        </v-col>
                      </v-row>
                    </v-card>
                  </v-col>
                </v-row>
              </v-container>
              <v-card-actions>
                <v-spacer></v-spacer>
                <v-btn color="green darken-1" text @click="funcEval(card.code)">运行代码</v-btn>
              </v-card-actions>
            </v-card>
          </v-dialog>
        </v-row>
	<v-flex text-center><h1>准备 概念</h1></v-flex>
        <v-row>
          <v-col cols="12" md="6" lg="4">
            <v-card :height="settings.cardHeight" outlined tile :raised="prepareBlocks.raised" @click="prepareBlocks.raised=!prepareBlocks.raised">
              <v-card-title>
                <h3>区块</h3><v-spacer></v-spacer><h3>节点</h3> 
              </v-card-title>
              <v-divider></v-divider>
              <v-row>
                <v-col cols="12" md="6">
                  <v-timeline dense>
                    <v-timeline-item v-for="(block, index) of dashboardBlocks" :key="block.id" :v-show="index < 3">
                      <v-card flat @click="block.blockDetail=!block.blockDetail">
                        <h4 class="font-weight-light">{{ block.id }}</h4>
                        <v-dialog @click="block.blockDetail=!block.blockDetail" v-model="block.blockDetail">
                          <v-card>
                            <v-card-title>
                             <v-spacer></v-spacer>
                              区块{{block.id}}内容 <v-spacer></v-spacer>
                              <v-btn color="primary" @click="block.blockDetail=!block.blockDetail"><v-icon fab large>mdi-close-circle-outline</v-icon></v-btn>
                            </v-card-title>
                            <prism-component language="javascript">{{ block.block }}</prism-component>
                          </v-card>
                        </v-dialog>
                      </v-card>
                    </v-timeline-item>
                  </v-timeline>
                </v-col>
                <v-col cols="12" md="6">
                  <v-list-item v-for="list of prepareBlocks.lists" :key="list">
                      <v-list-item-content>
                        <v-list-item-title>{{ list }}</v-list-item-title>
                      </v-list-item-content>
                  </v-list-item>
                </v-col>
              </v-row>
            </v-card>
          </v-col>
          <v-col cols="12" md="6" lg="4">
            <v-card :height="settings.cardHeight" outlined tile :raised="prepareNode.raised" @click="prepareNode.raised=!prepareNode.raised">
              <v-card-title>
                <h3>{{ prepareNode.title }}</h3>
              </v-card-title>
              <v-divider></v-divider>
              <h3 class="pl-4">{{ prepareNode.content }}</h3>
              <v-list-item v-for="list of prepareNode.lists" :key="list">
                  <v-list-item-content>
                    <v-list-item-title>{{ list }}</v-list-item-title>
                  </v-list-item-content>
              </v-list-item>
            </v-card>
          </v-col>
          <v-col v-for="(prepare,key) in prepares" :key="key" cols="12" md="6" lg="4" xl="3">
            <v-card :height="settings.cardHeight" outlined tile :raised="prepare.raised" @click="funcPrepareRaise(key)">
              <v-card-title>
                <h3>{{ prepare.title }}</h3>
              </v-card-title>
              <v-divider></v-divider>
              <h3 class="pl-4">{{ prepare.content }}</h3>
              <v-list-item v-for="list of prepare.lists" :key="list">
                  <v-list-item-content>
                    <v-list-item-title>{{ list }}</v-list-item-title>
                  </v-list-item-content>
              </v-list-item>
            </v-card>
          </v-col>
        </v-row>
        <v-divider></v-divider>
	<v-flex text-center><h1>调用</h1></v-flex>
        <v-row>
          <v-col v-for="(card,key) in cards" :key="key" cols="12" md="6" lg="4">
            <v-card :height="settings.cardHeight" outlined tile :raised="card.raised" @click="funcCardRaise(key)">
              <v-toolbar color="indigo" dark>
                <v-toolbar-title>remote.{{ key }}({{ funcCardParam(card) }})</v-toolbar-title>
              </v-toolbar>
              <v-divider></v-divider>
              <v-list-item>
                <v-list-item-content>
                  <v-list-item-title>{{ card.content }}</v-list-item-title>
                </v-list-item-content>
              </v-list-item>
              <v-list-item>
                <v-list-item-content>
                  <v-list-item-title>返回 {{ card.returns }}</v-list-item-title>
                </v-list-item-content>
              </v-list-item>
              <v-list-item>
                <v-list-item-content>
                  <v-list-item-title>参数 {{ card.params }}</v-list-item-title>
                </v-list-item-content>
              </v-list-item>
            </v-card>
          </v-col>
        </v-row>
      </v-container>
    </v-content>
    <v-container>
      <vue-markdown>The time of **NOW** is :</vue-markdown>
      <vue-markdown>**Inline Math**: $\sqrt{3x-1}+(1+x)^2$</vue-markdown>
      <vue-markdown></vue-markdown>
      <vue-markdown>**Block Math**</vue-markdown>
    </v-container>  
    </v-app>
  </div>

  <script src="https://unpkg.com/prismjs"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
  <script src="https://unpkg.com/vue-function-api@2.2.0/dist/vue-function-api.umd.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
  <script src="https://unpkg.com/vue-prism-component@1.1.1/dist/vue-prism-component.js"></script>
  <script src="https://unpkg.com/vue-markdown@2.2.4/dist/vue-markdown.js"></script>
  <script src="https://unpkg.com/swtc-lib"></script>
  <script src="https://unpkg.com/swtc-api"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> -->
  <script>
    Vue.use(vueFunctionApi.plugin)
    Vue.use(VueMarkdown)
    const Remote = swtc_api.Remote
    const Wallet = Remote.Wallet

    const ModalBrowser = {
      props: [ 'browserLink', 'browserBlocks' ],
      components: { PrismComponent },
      setup(props) {
        return {
        }
      },
      template: `
          <v-dialog v-model="browserLink.dialog" persistent full-page>
            <v-card min-height="500" min-width="400">
              <v-card-title class="headline">浏览器<v-spacer></v-spacer><v-btn color="red lighten-1" text @click="browserLink.dialog = false"><v-icon fab large>mdi-close-circle-outline</v-icon></v-btn></v-card-title>
              <v-toolbar dense dark><v-app-bar-nav-icon></v-app-bar-nav-icon></v-toolbar>
              <v-timeline dense>
                <v-timeline-item v-for="block of browserBlocks" :key="block.id">
                    <v-card>
                    <v-card-title class="purple lighten-2" @click="block.blockDetail=!block.blockDetail">
                        <h4 class="white--text font-weight-light">{{ block.id }}</h4>
                    </v-card-title>
                    <v-container>
                      <v-treeview :items="[block]" item-children="transactions"></v-treeview>
                      <prism-component v-show="block.blockDetail" language="javascript">{{ block.block }}</prism-component>
                    </v-container>
                  </v-card>
                </v-timeline-item>
              </v-timeline>
            </v-card>
          </v-dialog>
        `
    }
    const vm = new Vue({
      el: '#app',
      vuetify: new Vuetify(),
      components: { PrismComponent, ModalBrowser },
      setup() {
        const ledger = vueFunctionApi.value(0)
        const started = vueFunctionApi.value(false)
        const interval = vueFunctionApi.value(null)
        const settings = vueFunctionApi.value({
            dialog: false,
            toolbarTitle: 'SWTCLIB 教程',
            testChain: localStorage.testChain || true,
            walletSecret: localStorage.walletSecret || '',
            walletSecretEye: localStorage.walletSecretEye || true,
            walletAddress: localStorage.walletAddress || '',
            updateInterval: 10,
            maxBlocks: 10,
            cardHeight: localStorage.cardHeight || 270,
            libServer: localStorage.libServer || 'ws://ts5.jingtum.com:5020',
            apiServer: localStorage.apiServer || 'https://tapi.jingtum.com',
            testIssuer:localStorage.testIssuer || 'jBciDE8Q3uJjf111VeiUNM775AMKHEbBLS',
          })
        const evalString = vueFunctionApi.value('// node.js需要导入库 swtc_lib = require("swtc-lib")')
        const accountInfo = vueFunctionApi.value({balances: {loading: true}, payments: {loading: true}, orders: {loading: true}, txs: {loading: true}})
        const accountTabs = vueFunctionApi.value('balances')
        const labels = vueFunctionApi.value([ {id: 'base', name: '基础'}, {id: 'read', name: '读取'}, {id: 'write', name: '写入'}, {id: 'advanced', name: '进阶'}, {id: 'supplemental', name: '辅助'}, {id: 'unique', name: '独有'}, {id: 'all', name: '所有'} ])
        const activeLabel = vueFunctionApi.value({id: 'all', name: '所  有'})
        const wallets = vueFunctionApi.value({id: 'account', name: '账户', dialog: false})
        const browsers = vueFunctionApi.value({id: 'browser', name: '浏览器', dialog: false})
        const blocks = vueFunctionApi.value([])
        const dashboardBlocks = vueFunctionApi.value([])
        const funcUpdateAccountInfo = async () => {
            wallets.value.dialog = true
            let remote = computedApiRemote.value
            remote.getAccountBalances(settings.value.walletAddress).then(result => accountInfo.value.balances = result).catch(error => accountInfo.value.balances = {error: '未激活'})
            remote.getAccountPayments(settings.value.walletAddress).then(result => accountInfo.value.payments = result).catch(error => accountInfo.value.balances = {error: '未激活'})
            remote.getAccountOrders(settings.value.walletAddress).then(result => accountInfo.value.orders = result).catch(error => accountInfo.value.balances = {error: '未激活'})
            remote.getAccountTransactions(settings.value.walletAddress).then(result => accountInfo.value.txs = result).catch(error => accountInfo.value.balances = {error: '未激活'})
          }
        const funcEval = (string) => {
          string = `try {
${string}
} catch (error) {
  console.log(error)
  alert('运行出错了，修改检查')
}
`
          eval(string)
        }
        const funcSetInterval = () => {
            let remote = computedApiRemote.value
            interval.value = setInterval(async () => {
                if (started.value) {
                  try {
                    let block = await remote.getLedger(ledger.value + 1)
                    if (block.closed) {
                      ledger.value = ledger.value + 1
                      if (!blocks.value.find(e => e.id === block.ledger_index)) {
                        blocks.value.unshift({id: block.ledger_index, name: block.ledger_hash, blockDetail: false, transactions: block.transactions.map( (e,i) => ({id: i, name: e})), block})
                        dashboardBlocks.value.unshift({id: block.ledger_index, name: block.ledger_hash, blockDetail: false, transactions: block.transactions.map( (e,i) => ({id: i, name: e})), block})
                        blocks.value.splice(settings.value.maxBlocks)
                        dashboardBlocks.value.splice(3)
                      }
                    } else {
                      console.log(`...ledger ${ledger.value + 1} not closed yet`)
                    }
                  } catch (error) {
                    console.log(error)
                    console.log('wait for next')
                  }
                } else {
                  console.log('not started yet')
                }
              }, settings.value.updateInterval * 1000)
        }
        const funcClearInterval = () => {
          if (interval.value) {
            clearInterval(interval.value)
          }
        }
        const funcPrepareRaise = (key) => {
            computedPrepareKeys.value.forEach(
              e => e === key ? (prepares.value)[e].raised = true : (prepares.value)[e].raised = false
            )
          }
        const funcCardRaise = (key) => {
            computedCardKeys.value.forEach(
              e => e === key ? (cards.value)[e].raised = true : (cards.value)[e].raised = false
            )
          }
        const funcCardParam = (card) => {
            let r = ''
            if (card.params) {
              r = `{}`
            }
            return r
          }
        // const funcMarked = (text) => marked(text)
        vueFunctionApi.watch(() => settings.value.walletSecret, (value, oldValue) => { if (Wallet.isValidSecret(value)) { localStorage.walletSecret = value; settings.value.walletAddress = Wallet.fromSecret(value).address; localStorage.walletAddress = settings.value.walletAddress }}, {lazy: true})
        vueFunctionApi.watch(() => settings.value.testChain, (value, oldValue) => {
            console.log(`detected change from ${oldValue} to ${value}` )
            funcClearInterval()
            funcSetInterval()
          }, {lazy: true})
        const computedPrepareKeys = vueFunctionApi.computed(() => Object.keys(prepares.value))
        const computedCardKeys = vueFunctionApi.computed(() => Object.keys(cards.value))
        vueFunctionApi.onCreated(async () => {
            console.log("...vue created")
            if (!settings.value.walletSecret || !Wallet.isValidSecret(settings.value.walletSecret)) {
              // generate a wallet
              let wallet = Wallet.generate()
              settings.value.walletSecret = wallet.secret
              settings.value.walletAddress = wallet.address
              localStorage.walletSecret = wallet.secret
              localStorage.walletAddress = wallet.address
            }
            if (settings.value.testChain) {
              evalString.value += `\nlet remote = new swtc_lib.Remote(
    {
      server: "${settings.value.libServer}",
      // issuer: "${settings.value.testIssuer}"
    }
  )
`
            } else {
              evalString.value += `\nlet remote = new swtc_lib.Remote()`
            }
            evalString.value += `\nconsole.dir(remote.config())`
            evalString.value += `\n// 如果没有javascript终端 alert(JSON.stringify(remote.config(), '', 2))`
            let remote = computedApiRemote.value
            if (Wallet.isValidSecret(settings.value.walletSecret)) {
              settings.value.walletAddress = Wallet.fromSecret(settings.value.walletSecret).address
              localStorage.walletAddress = settings.value.walletAddress
            } else {
              settings.value.walletAddress = 'secret incorrect 密钥错误'
              localStorage.walletAddress = settings.value.walletAddress
              localStorage.walletSecret = ''
            }
            try {
              let block = await remote.getLedger()
              ledger.value = block.ledger_index
              started.value = true
              //console.log('block explorer initiated')
              block = await remote.getLedger(ledger.value)
              
              blocks.value.unshift({id: block.ledger_index, name: block.ledger_hash, blockDetail: true, transactions: block.transactions.map( (e,i) => ({id: i, name: e})), block})
              dashboardBlocks.value.unshift({id: block.ledger_index, name: block.ledger_hash, blockDetail: false, transactions: block.transactions.map( (e,i) => ({id: i, name: e})), block})
            } catch (error) {
              console.log(error)
            }
          })
        vueFunctionApi.onMounted(() => {
            // console.log("...vue mounted")
            funcInitCards()
            funcSetInterval()
          })
        const computedRemoteOption = vueFunctionApi.computed(() => {
            return settings.value.testChain ? {server: 'ws://ts5.jingtum.com:5020', issuer: settings.value.testIssuer} : {}
          })
        const computedApiRemoteOption = vueFunctionApi.computed(() => {
            settings.value.testChain ? {server: 'https://tapi.jingtum.com', issuer: settings.value.testIssuer} : {}
          })
        const computedRemoteString = vueFunctionApi.computed(() => {
            let r
            if (settings.value.testChain) {
              r = `new (swtc_lib.Remote)({server: 'ws://ts5.jingtum.com:5020'})`
            } else if (settings.value.libServer) {
              r = `new (swtc_lib.Remote)({server: settings.value.libServer})`
            } else {
              r = `new (swtc_lib.Remote)()`
            }
            return r
          })
        const computedRemote = vueFunctionApi.computed(() => {
            let r
            if (settings.value.testChain) {
              r = new (swtc_lib.Remote)({server: 'ws://ts5.jingtum.com:5020', issuer: settings.value.testIssuer})
            } else if (settings.value.libServer) {
              r = new (swtc_lib.Remote)({server: settings.value.libServer})
            } else {
              r = new (swtc_lib.Remote)()
            }
            return r
          })
        const computedApiRemote = vueFunctionApi.computed(() => {
            let r
            if (settings.value.testChain) {
              r = new (swtc_api.Remote)({server: 'https://tapi.jingtum.com', issuer: settings.value.testIssuer})
            } else if (settings.value.apiServer) {
              r = new (swtc_api.Remote)({server: settings.value.apiServer})
            } else {
              r = new (swtc_api.Remote)()
            }
            return r
          })
        const funcInitCards = () => {
            computedCardKeys.value.forEach((key) => {
              let card = cards.value[key]
              if (card.params) {
                card.tabs.push('参数')
              }
              console.log(`processing card for ${key}`)
              card.code = `
// node.js 环境需要导入库 swtc_lib = require("swtc-lib")

let remote = ${computedRemoteString.value}
remote.connectPromise()
  .then(async (result) => {
      console.log(result)
      // 试验场所
      result = await remote.${key}(${funcCardParam(card)}).submitPromise()
      console.dir(result)
      // alert(JSON.stringify(result, '', 2))
      remote.disconnect()
    })
  .catch((error) => console.error(error))
`
            })
          }
        const prepareBlocks = vueFunctionApi.value({
            title: '区块|井通节点',
            content: '区块|井通节点',
            lists: [
              '区块链数据 - 全账本',
              '区块链数据 - 部分账本',
              'websocket - 交互接口',
              'websocket - 查询写入',
            ]
          })
        const prepareNode = vueFunctionApi.value({
            title: 'SWTCLIB库',
            content: '引用SWTCLIB',
            lists: [
              "node.js - swtc_lib = require('swtc-lib')",
              'web - <script src="https://unpkg.com/swtc-lib" />',
            ]
          })
        const prepares = vueFunctionApi.value({
          swtclib: {
            title: '包装类 - Remote',
            content: 'swtc_lib.Remote',
            lists: [
              '创建 实例 - remote = new Remote()',
              '请求 查询 - request = remote.request***()',
              '请求 写入 - tx = remote.build***Tx()'
            ]
          },
          request: {
            title: '包装类 - Request [查询]',
            content: 'swtc_lib.Request',
            lists: [
              '实例 - request = new Request()',
              '提交promise - request.submitPromise()',
            ]
          },
          tx: {
            title: '包装类 - Transaction [写入]',
            content: 'swtc_lib.Transaction',
            lists: [
              '实例 - tx = new Transaction()',
              '提交promise - tx.submitPromise(secret)',
            ]
          },
          wallet: {
            title: '包装类 - Wallet [账户]',
            content: 'swtc_lib.Wallet',
            lists: [
              '实例 - wallet = new Wallet(secret)',
              '静态方法 - w1 = Wallet.generate()',
              '静态方法 - w2 = Wallet.fromSecret(secret)',
            ]
          },
        })
        const cards = vueFunctionApi.value({
          requestServerInfo: {
            title: '查询服务器信息',
            content: '查询服务器信息',
            code: '',
            params: '',
            returns: 'request',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          requestLedgerClosed: {
            title: '查询最新关闭的区块',
            content: '查询最新关闭的区块',
            code: '',
            params: '',
            returns: 'request',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          requestLedger: {
            title: '查询区块',
            content: '查询区块',
            code: '',
            params: 'object',
            returns: 'request',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          requestTx: {
            title: '查询交易信息',
            content: '查询交易信息',
            code: '',
            params: 'object',
            returns: 'request',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          requestPathFind: {
            title: '查询路径撮合',
            content: '查询路径撮合',
            code: '',
            params: 'object',
            returns: 'request',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          requestAccountInfo: {
            title: '查询账户信息',
            content: '查询账户信息',
            code: '',
            params: 'object',
            returns: 'request',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          requestAccountOffers: {
            title: '查询账户挂单',
            content: '查询账户挂单',
            code: '',
            params: 'object',
            returns: 'request',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          requestAccountTx: {
            title: '查询账户记录',
            content: '查询账户记录',
            code: '',
            params: 'object',
            returns: 'request',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          requestOrderBook: {
            title: '查询挂单列表',
            content: '查询挂单列表',
            code: '',
            params: 'object',
            returns: 'request',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          requestAccountTums: {
            title: '查询账户通证',
            content: '查询账户通证',
            code: '',
            params: 'object',
            returns: 'request',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          buildAccountSetTx: {
            title: '创建账户关系交易',
            content: '创建账户关系交易',
            code: '',
            params: 'object',
            returns: 'tx',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          buildBrokerageTx: {
            title: '创建代理商交易',
            content: '创建代理商交易',
            code: '',
            params: 'object',
            returns: 'tx',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          buildContractCallTx: {
            title: '创建执行LUA合约交易',
            content: '创建执行LUA合约交易',
            code: '',
            params: 'object',
            returns: 'tx',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          buildContractDeployTx: {
            title: '创建部署LUA合约交易',
            content: '创建部署LUA合约交易',
            code: '',
            params: 'object',
            returns: 'tx',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          buildContractInitTx: {
            title: '创建部署SOLIDITY合约交易',
            content: '创建部署SOLIDITY合约交易',
            code: '',
            params: 'object',
            returns: 'tx',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          buildContractInvokeTx: {
            title: '创建执行SOLIDITY合约交易',
            content: '创建执行SOLIDITY合约交易',
            code: '',
            params: 'object',
            returns: 'tx',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          buildOfferCancelTx: {
            title: '创建取消挂单交易',
            content: '创建取消挂单交易',
            code: '',
            params: 'object',
            returns: 'tx',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          buildOfferCreateTx: {
            title: '创建提交挂单交易',
            content: '创建提交挂单交易',
            code: '',
            params: 'object',
            returns: 'tx',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          buildPaymentTx: {
            title: '创建支付交易',
            content: '创建支付交易',
            code: '',
            params: 'object',
            returns: 'tx',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          buildRelationTx: {
            title: '创建关系交易',
            content: '创建关系交易',
            code: '',
            params: 'object',
            returns: 'tx',
            tab: '',
            tabs: ['练习'],
            raised: false
          },
          buildSignTx: {
            title: '创建签名交易',
            content: '创建签名交易',
            code: '',
            params: 'object',
            returns: 'tx',
            tab: '',
            tabs: ['练习'],
            raised: false
          }
        })
        return {
          settings,
          accountInfo,
          accountTabs,
          labels,
          activeLabel,
          wallets,
          browsers,
          interval,
          evalString,
          ledger,
          started,
          blocks,
          dashboardBlocks,
          cards,
          prepareBlocks,
          prepareNode,
          prepares,
          computedPrepareKeys,
          computedCardKeys,
          computedRemoteOption,
          computedApiRemoteOption,
          computedRemote,
          computedRemoteString,
          computedApiRemote,
          funcPrepareRaise,
          funcCardRaise,
          funcCardParam,
          funcInitCards,
          funcEval,
          funcSetInterval,
          funcClearInterval,
          funcUpdateAccountInfo
        }
      }
    })
    if (window) { window.vm = vm}
  </script>
</body>
</html>
